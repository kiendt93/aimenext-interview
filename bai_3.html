<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="lib/boostrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all">
    <link href="css/calculator.css" rel="stylesheet" type="text/css" media="all">

    <title>Bài 1</title>
</head>
<body>
<div class="container px-4 py-5" id="featured-3">
    <h2 class="pb-2 border-bottom">Bài 3</h2>
    <p>
        <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
            Xem đề bài
        </a>
        <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample2" role="button" aria-expanded="false" aria-controls="collapseExample">
            Xem source code
        </a>
    </p>
    <div class="collapse pb-2" id="collapseExample">
        <div class="card card-body">
            <h4>Đề bài</h4>
            Hãy tạo một giao diện máy tính bỏ túi với HTML và CSS và sau đó thêm các tính năng khác nhau bằng JavaScript.<br>
            Bắt đầu đơn giản với các toán tử đơn giản cho:<br>
            Phép cộng<br>
            Phép trừ<br>
            Phép nhân<br>
            Phép chia<br>
        </div>
    </div>
    <div class="collapse pb-2" id="collapseExample2">
        <div class="card card-body">
            <h4>Source code</h4>
            <code>
                <pre>
        var viewer = $("#viewer"),
        theNum = "",
        oldNum = "",
        resultNum,
        operator;

        $(".num").click(function() {
            if (resultNum) {
                theNum = this.getAttribute("data-num");
                resultNum = "";
            } else {
                theNum += this.getAttribute("data-num");
            }
            viewer.html(theNum);
        });

        $(".ops").click(function() {
            oldNum = theNum;
            theNum = "";
            operator = this.getAttribute("data-ops");

            $("#equals").attr("data-result", "");
        });

        $("#equals").click(function() {
            oldNum = parseFloat(oldNum);
            theNum = parseFloat(theNum);
            switch (operator) {
                case "plus":
                    resultNum = oldNum + theNum;
                    break;
                case "minus":
                    resultNum = oldNum - theNum;
                    break;
                case "times":
                    resultNum = oldNum * theNum;
                    break;
                case "divided by":
                    resultNum = oldNum / theNum;
                    break;
                default:
                    resultNum = theNum;
            }
            $("#equals").attr("data-result", resultNum);
            viewer.html(resultNum);
            oldNum = 0;
            theNum = resultNum;
        });

        $("#clear").click(function() {
            oldNum = "";
            theNum = "";
            viewer.html("0");
            $("#equals").attr("data-result", resultNum);
        });
            </pre>
            </code>
        </div>
    </div>
    <div class="card card-body">
        <h4 class="mb-5">Câu trả lời</h4>
        <div id="calculator" class="calculator calculator-box">
            <div id="viewer" class="viewer cal-disp">0</div>
            <div class="cal-keys">
                <button data-ops="plus" class="b-key ops k2">+</button>
                <button class="b-key num" data-num="7">7</button>
                <button class="b-key num" data-num="8">8</button>
                <button class="b-key num" data-num="9">9</button>

                <button data-ops="minus" class="b-key ops k2">-</button>
                <button class="b-key num" data-num="4">4</button>
                <button class="b-key num" data-num="5">5</button>
                <button class="b-key num" data-num="6">6</button>

                <button data-ops="times" class="b-key ops k2">*</button>
                <button class="b-key num" data-num="1">1</button>
                <button class="b-key num" data-num="2">2</button>
                <button class="b-key num" data-num="3">3</button>

                <button data-ops="divided by" class="b-key ops k2">/</button>
                <button class="b-key num k4" data-num="0">0</button>
                <button class="b-key num" data-num=".">.</button>

                <button id="clear" class="b-key clear k1">C</button>
                <button id="equals" class="b-key equals k4 k1" data-result="">=</button>
            </div>
        </div>
    </div>
    <p style="text-align: right">
        <a class="btn btn-secondary mt-2" href="index.php">
            Quay lại
        </a>
    </p>
</div>

<script src="lib/jquery-3.5.1.min.js"></script>
<script src="lib/boostrap/js/bootstrap.min.js"></script>

<script>
        var viewer = $("#viewer"),
            theNum = "",
            oldNum = "",
            resultNum,
            operator;

        $(".num").click(function() {
            if (resultNum) {
                theNum = this.getAttribute("data-num");
                resultNum = "";
            } else {
                theNum += this.getAttribute("data-num");
            }
            viewer.html(theNum);
        });

        $(".ops").click(function() {
            oldNum = theNum;
            theNum = "";
            operator = this.getAttribute("data-ops");

            $("#equals").attr("data-result", "");
        });

        $("#equals").click(function() {
            oldNum = parseFloat(oldNum);
            theNum = parseFloat(theNum);
            switch (operator) {
                case "plus":
                    resultNum = oldNum + theNum;
                    break;
                case "minus":
                    resultNum = oldNum - theNum;
                    break;
                case "times":
                    resultNum = oldNum * theNum;
                    break;
                case "divided by":
                    resultNum = oldNum / theNum;
                    break;
                default:
                    resultNum = theNum;
            }
            $("#equals").attr("data-result", resultNum);
            viewer.html(resultNum);
            oldNum = 0;
            theNum = resultNum;
        });

        $("#clear").click(function() {
            oldNum = "";
            theNum = "";
            viewer.html("0");
            $("#equals").attr("data-result", resultNum);
        });


</script>

</body>
</html>
